System.register(["@babel/helper-module-imports","@babel/types","aslemammad-vite-plugin-macro","babel-plugin-macros"],function(o){"use strict";var c,r,l,d,s,u;return{setters:[function(e){c=e.addNamed},function(e){r=e},function(e){l=e.defineMacro,d=e.createMacroPlugin,s=e.defineMacroProvider},function(e){u=e.MacroError}],execute:function(){o("provideValtioMacro",v);const e=o("valtioMacro",l("useProxy").withSignature("<T extends object>(proxyObject: T): void").withHandler(h=>{var m,f,p,M;const{path:n,args:P}=h,g=c(n,"useSnapshot","valtio"),a=(m=P[0])==null?void 0:m.node;if(!r.isIdentifier(a))throw new u("no proxy object");const b=r.identifier(`valtio_macro_snap_${a.name}`);(f=n.parentPath)==null||f.replaceWith(r.variableDeclaration("const",[r.variableDeclarator(b,r.callExpression(g,[a]))]));let t=0;(M=(p=n.parentPath)==null?void 0:p.getFunctionParent())==null||M.traverse({Identifier(i){t===0&&i.node!==a&&i.node.name===a.name&&(i.node.name=b.name)},Function:{enter(){++t},exit(){--t}}})}));function v(){return s({id:"valtio/macro",exports:{"valtio/macro":{macros:[e]}}})}const x=o("default",d({}).use(v()))}}});
