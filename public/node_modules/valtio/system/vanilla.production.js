System.register(["proxy-compare"],function(K){"use strict";var k,O;return{setters:[function(g){k=g.getUntracked,O=g.markToTrack}],execute:function(){K({getHandler:B,getVersion:V,proxy:M,ref:N,snapshot:z,subscribe:q});const g=Symbol(),a=Symbol(),j=Symbol(),R=Symbol(),d=Symbol(),v=Symbol(),w=new WeakSet;function N(t){return w.add(t),t}const P=t=>typeof t=="object"&&t!==null,U=t=>P(t)&&!w.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer),x=new WeakMap;let A=1;const E=new WeakMap;function M(t={}){if(!P(t))throw new Error("object required");const h=x.get(t);if(h)return h;let l=A;const y=new Set,f=(n,e=++A)=>{l!==e&&(l=e,y.forEach(r=>r(n,e)))},u=new Map,m=n=>{let e=u.get(n);return e||(e=(r,o)=>{const c=[...r];c[1]=[n,...c[1]],f(c,o)},u.set(n,e)),e},T=n=>{const e=u.get(n);return u.delete(n),e},I=(n,e)=>{const r=E.get(e);if((r==null?void 0:r[0])===l)return r[1];const o=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n));return O(o,!0),E.set(e,[l,o]),Reflect.ownKeys(n).forEach(c=>{const i=Reflect.get(n,c,e);if(w.has(i))O(i,!1),o[c]=i;else if(i instanceof Promise)if(d in i)o[c]=i[d];else{const b=i[v]||i;Object.defineProperty(o,c,{get(){if(d in i)return i[d];throw b}})}else i!=null&&i[a]?o[c]=i[j]:o[c]=i}),Object.freeze(o),o},W=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t)),D={get(n,e,r){return e===g?l:e===a?y:e===j?I(n,r):e===R?D:Reflect.get(n,e,r)},deleteProperty(n,e){const r=Reflect.get(n,e),o=r==null?void 0:r[a];o&&o.delete(T(e));const c=Reflect.deleteProperty(n,e);return c&&f(["delete",[e],r]),c},is:Object.is,canProxy:U,set(n,e,r,o){var c;const i=Reflect.has(n,e),b=Reflect.get(n,e,o);if(i&&this.is(b,r))return!0;const H=b==null?void 0:b[a];H&&H.delete(T(e)),P(r)&&(r=k(r)||r);let s;return(c=Object.getOwnPropertyDescriptor(n,e))!=null&&c.set?s=r:r instanceof Promise?s=r.then(p=>(s[d]=p,f(["resolve",[e],p]),p)).catch(p=>{s[v]=p,f(["reject",[e],p])}):r!=null&&r[a]?(s=r,s[a].add(m(e))):this.canProxy(r)?(s=M(r),s[a].add(m(e))):s=r,Reflect.set(n,e,s,o),f(["set",[e],r,b]),!0}},S=new Proxy(W,D);return x.set(t,S),Reflect.ownKeys(t).forEach(n=>{const e=Object.getOwnPropertyDescriptor(t,n);e.get||e.set?Object.defineProperty(W,n,e):S[n]=t[n]}),S}function V(t){return P(t)?t[g]:void 0}function q(t,h,l){let y;const f=[],u=m=>{if(f.push(m),l){h(f.splice(0));return}y||(y=Promise.resolve().then(()=>{y=void 0,h(f.splice(0))}))};return t[a].add(u),()=>{t[a].delete(u)}}function z(t){return t[j]}function B(t){return t[R]}}}});
