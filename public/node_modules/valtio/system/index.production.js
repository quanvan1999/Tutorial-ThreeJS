System.register(["react","proxy-compare","use-sync-external-store/shim","valtio/vanilla"],function(u){"use strict";var s,o,i,f,p,b,h,y,c;return{setters:[function(e){s=e.useRef,o=e.useCallback,i=e.useEffect,f=e.useMemo},function(e){p=e.isChanged,b=e.createProxy},function(e){h=e.default},function(e){y=e.subscribe,c=e.snapshot,u({getVersion:e.getVersion,proxy:e.proxy,ref:e.ref,snapshot:e.snapshot,subscribe:e.subscribe,unstable_getHandler:e.getHandler})}],execute:function(){u("useSnapshot",S);const{useSyncExternalStore:e}=h;function S(t,x){const g=x==null?void 0:x.sync,r=s(),a=s();let k=!0;const l=e(o(n=>{const C=y(t,n,g);return n(),C},[t,g]),()=>{const n=c(t);try{if(!k&&r.current&&a.current&&!p(r.current,n,a.current,new WeakMap))return r.current}catch{}return n},()=>c(t));k=!1;const M=new WeakMap;i(()=>{r.current=l,a.current=M});const v=f(()=>new WeakMap,[]);return b(l,M,v)}}}});
